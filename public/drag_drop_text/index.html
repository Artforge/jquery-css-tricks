<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Drag & Drop Text</title>



<script type="text/javascript" src="/javascripts/jquery-1.4.min.js"></script>
<script type="text/javascript" src="/javascripts/jquery.highlight.js"></script>
<script type="text/javascript"> 
	var highlights = [];
	
	$(document).ready(function(){

		$("#dropzone .insight .trash").live("click", function(){
			insightDiv = $(this).parents(".insight")
			spanId = insightDiv.data("highlight");
			highlightSpan = document.getElementById(spanId);
			// console.log(highlightSpan);
			$("#post").removeHighlight_with_id(spanId);
			$(insightDiv).fadeOut();
		});
		
		$("#dropzone .insight").live("mouseover", function(){
			selection = $(this).find(".excerpt").html()
			$("#post").highlight(selection);
		});
		
		$("#dropzone .insight").live("mouseout", function(){
			// selection = $(this).html();
			$("#post").removeHighlight();
		});
		
		
		$('#post').mouseup(function(e){
			var selection = getSelected();
			// console.log(selection);
			if (selection && (selection = new String(selection).replace(/^\s+|\s+$/g,''))) {
				// highlights.push(selection);
				insightDiv = $('<div>').attr({id: "insight_" + highlights.length, class: "insight"}).hide();
				insightExcerpt = $('<span>').html(selection).attr({class: "excerpt"});
				insightDiv.append(insightExcerpt);
				// insightDiv.data("highlight", "highlight_" + highlights.length);
				toolsDiv = $('<div>').attr({class: "actions"});
				toolsDiv.append($('<span>').attr({class: "edit", title: "Edit this excerpt"}));
				toolsDiv.append($('<span>').attr({class: "trash", title: "Delete this excerpt"}));
				toolsDiv.append($('<span>').attr({class: "comment", title: "Comment on this excerpt"}));
				insightDiv.append(toolsDiv);
				$("#dropzone").append(insightDiv);
				insightDiv.fadeIn();
				// $("#post").highlight_with_id(selection, "highlight_" + highlights.length);
			}
		});

	});
	
	function getSelected() {
		if(window.getSelection) { return window.getSelection(); }
		else if(document.getSelection) { return document.getSelection(); }
		else {
			var selection = document.selection && document.selection.createRange();
			if(selection.text) { return selection.text; }
			return false;
		}
		return false;
	}


</script> 

<style type="text/css">
	#post{width:75%;float:left;}
	#sidebar{width:25%;float:right;}
	#dropzone{height:300px;border:3px double red;margin:10px;padding:10px;}
	
	.insight{border:1px dashed #ccc;padding:5px;margin:5px;}
	
	.highlight { background-color: yellow; padding:auto 3px;}
	.excerpt{margin-right:5px;}
	.actions{display:inline-block;}
	.actions span{display:inline-block;width:12px;height:14px;vertical-align:middle;margin:0px 3px 2px;}
	.actions .edit{background:url(/images/insights/edit.gif) no-repeat 1px 0px;}
	.actions .trash{background:url(/images/insights/trash.gif) no-repeat 1px 2px;}
	.actions .comment{background:url(/images/insights/comment.gif) no-repeat 1px 2px;}
</style>
</head>

<body id="home">
	<div id="post">
		<p>My experiences have all been awful.  There has been no "light at the end of the tunnel," no blessing in disguise and no valuable learning experience.  It's all very negative.  It has been a terrible, terrible experience.  This disease is really one of the worst.  It hits during the dead center of the prime of life and just slowly destroys us.  The old term of creeping paralysis is very appropriate.  I spend hours thinking about all this disease has stolen from me and worse yet, I wonder about the things I don't realize that I've lost.  What would life be like had this not happened?  What experiences have I missed?  There's a whole world out there and I can scarcely take part in it.</p>
		<p>If I had to find a specific experience, or set of experiences, that defined my MS struggle it would be the month I spent in Baltimore being treated.  It took part in a risky, difficult trial involving high doses of chemotherapy.  This is an example of the lengths I was willing to go to preserve functioning.  I told the doctor at JH that I'd drink a gallon of gasoline if it would preserve the use of my body.</p>
	</div>
	<div id="sidebar">
		<div id="dropzone">
		
		</div>
	</div>
</body>
</html>

